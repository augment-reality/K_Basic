This directory can contain any extra source and text files,
which are not required to run the game.

The files won't be committed into source control repository and
won't be packaged for deployment.
It can contains notes, docs, tools, tests, data files, etc...

---------------------------   Summary so far ----------------------------------------

State machine is implemented, but most of code to execute during state has not been written.
HTML for desktop is largely finished. Should re-scan cards for improved quality.


----------------------------    To do   -------------------------------------------

-Active player cycle always lets them draw a new card at beginning of round; just an artifact of skipping to pray/convert?
-need to add played/resolved cards on refresh
-Players can always draw a card by paying 5 prayer; need to test the proposed state 80
-sidebars names not color coded?
-player color preferences: https://en.doc.boardgamearena.com/Main_game_logic:_Game.php#Player_color_preferences
-implement code to update db value of happiness
-"play a card" - option to disable? 
-card backs for other players (Add image for face-down cards to other player divs in notif_playerDrewCard)
-option to hide other players divs?
-what value to use as placeholder for die roll?
-undo buttons
-handle php case for "zombie" player: remove families from game and pass all options to play card
-player scores? The column player_score from the player table is automatically loaded into this.scoreCtrl
    and therefore into the stars location on the player board. This occurs sometime after the game setup() function.
    However this score must be updated as the game progresses using notifications.


------------------------------   Setup   -----------------------------------------
local/global disaster deck; bonus deck
get 10 fams, 1 leader, 5 prayer, 5 happiness (marker on board)
Kalua main board has 3 families per player 3*playerc 

players draw 5 (can draw from both decks)

random starting player

---------------------------  Visual layout  -------------------------------

"hkboard" where player happiness is indicated by respective "hktoken" cubes and gray "atheist" meeples reside
an area for played cards (needs to hold 1 per player) with a die under each potential card slot 
A table area for each player to contain meeples (converted atheists and chief). Cards should only be visible to player.
Potentially need an area for the amulet and temple cards, which are held after playing - otherwise just a counter in the side panel
Potentially include decks for visual clarity or to click on when drawing cards

---------------------------  Game States and intended events  -------------------------------

A list of game states is found in constants.php


--------------   Steps of Game (as summarized from rules)   -----------------------------------

1. (Initial_Draw) Active player checks if <5 cards in hand, draw to 5. Otherwise draw 1.

2. (Free_Action) Starting with active player, if chief remains, choose 1:

    a) Give a speech: Increase happiness by 1.
        h = h+1

    b) Convert atheists: Take 2 families from the Kalua board.
        if k>1, player +2; if k=1, player +1, else nothing

    c) Convert believers: Take 1 family from another God.
        limit selection to players > 0: player -1, player current +1

    d) Sacrifice Leader: Remove your Leader from play and add up to 5 Families to your religion from the Kalua board.
        set player leader = 0, player families +5

3. (Convert) active player selects card or passes 

4. (Non-active_Turn) everyone else can play card and pay cost (global player has option to escape effect, or double it; save family count when global disaster occurs to break tie)

5. (Card_Effect) card effects happen in order (local - need to choose player at time it is resolved, can target self)

6. repeat from 3. until state until convert is chosen

7. Automatic reallocation of families:
    Check distribution of happiness. Find lowest happiness score (var happy_value_low) and check for highest happiness score (var happy_value_high). If low=high, skip to step 8. 

Families are sent to temporary group (var converted_pool) for redistribution: if player happiness = var happy_value_low sends 2 families/  if player happiness != var happy_value_low or var happy_value_high, sends 2 families

Count # of players in group 2 (var happy_value_high)
If count of var converted_pool >= 3* count of var happy_value_high, each player gets three and remainder to Kalua (hkboard)
Else var converted_pool / count of var happy_value_high, remainder to kalua (hk board)

8. Players receive 1 prayer for every 5 families, plus some extra
    if player happiness = var happy_value_low, get 4 extra
    if player happiness != var happy_value_low or var happy_value_high, get 2 extra


------------------------- Check End Game -----------------------------------------

9. If all families/leaders gone, player eliminated.

10. If only one religion remaining, they win. Skip to step 13.

11. If no religions remaining, check tie breaker

12. Active player changes

13. End Game. Determine Winner. Skip to step 13.

